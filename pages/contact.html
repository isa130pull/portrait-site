<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>お問い合わせ | かわぐち（isa130pull）</title>
  <meta name="description" content="ゲーム開発・アプリ開発のご相談はこちらから。お気軽にお問い合わせください。" />
  <link rel="canonical" href="https://isa130pull.github.io/portrait-site/pages/contact.html" />
  <link rel="icon" href="/favicon.ico" />

  <style>
    :root{
      --bg: #0b0c0f;
      --fg: #e8eaed;
      --muted: #a1a7b3;
      --accent: #6ee7ff;
      --card: #14161a;
      --border: #1f2329;
      --maxw: 800px;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#ffffff; --fg:#111318; --muted:#5a6472; --card:#f7f8fa; --border:#e5e7eb; --accent:#0ea5e9; }
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{ margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans JP, "Hiragino Kaku Gothic ProN", "Yu Gothic UI", sans-serif; background:var(--bg); color:var(--fg); line-height:1.8; }
    a{ color:var(--accent); text-decoration:none; }
    a:hover{ text-decoration:underline; }
    .wrap{ max-width:var(--maxw); margin-inline:auto; padding:24px; }
    header{ padding:24px 0; border-bottom:1px solid var(--border); }
    h1{ font-size: clamp(24px, 4vw, 32px); margin:0; }
    .lead{ color:var(--muted); margin:16px 0 32px; line-height:1.6; }
    .back-link{ display:inline-block; margin-bottom:24px; padding:8px 16px; border:1px solid var(--border); border-radius:8px; }

    /* Form Styles */
    .form-group{ margin-bottom:24px; }
    label{ display:block; font-weight:600; margin-bottom:8px; font-size:15px; }
    label .required{ color:#ff6b6b; margin-left:4px; }
    input[type="text"],
    input[type="email"],
    select,
    textarea{
      width:100%;
      padding:12px 16px;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:8px;
      color:var(--fg);
      font-size:15px;
      font-family:inherit;
      transition: border-color 0.2s;
    }
    input[type="text"]:focus,
    input[type="email"]:focus,
    select:focus,
    textarea:focus{
      outline:none;
      border-color:var(--accent);
    }
    textarea{
      min-height:150px;
      resize:vertical;
      line-height:1.6;
    }
    select{
      appearance:none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23a1a7b3' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat:no-repeat;
      background-position:right 12px center;
      padding-right:40px;
    }

    .submit-btn{
      width:100%;
      padding:14px 24px;
      background:var(--accent);
      color:#000;
      border:none;
      border-radius:8px;
      font-size:16px;
      font-weight:600;
      cursor:pointer;
      transition: opacity 0.2s;
    }
    .submit-btn:hover{
      opacity:0.9;
    }
    .submit-btn:disabled{
      opacity:0.5;
      cursor:not-allowed;
    }

    /* Message Styles */
    .message{
      padding:16px;
      border-radius:8px;
      margin-bottom:24px;
      display:none;
    }
    .message.show{
      display:block;
    }
    .message.success{
      background:color-mix(in oklab, #22c55e, transparent 85%);
      border:1px solid color-mix(in oklab, #22c55e, transparent 70%);
      color:#22c55e;
    }
    .message.error{
      background:color-mix(in oklab, #ef4444, transparent 85%);
      border:1px solid color-mix(in oklab, #ef4444, transparent 70%);
      color:#ef4444;
    }

    footer{
      margin-top:64px;
      padding:24px 0;
      border-top:1px solid var(--border);
      color:var(--muted);
      font-size:14px;
      text-align:center;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <a href="../index.html" class="back-link">← トップページに戻る</a>
      <h1>お問い合わせ</h1>
      <p class="lead">お仕事のご相談はこちらからお気軽にお問い合わせください。<br>通常、2営業日以内にご返信いたします。</p>
    </header>

    <main>
      <!-- Success/Error Message -->
      <div id="message" class="message"></div>

      <!-- Contact Form -->
      <form id="contact-form">
        <div class="form-group">
          <label for="name">お名前<span class="required">*</span></label>
          <input type="text" id="name" name="name" required placeholder="山田 太郎">
        </div>

        <div class="form-group">
          <label for="email">メールアドレス<span class="required">*</span></label>
          <input type="email" id="email" name="email" required placeholder="example@example.com">
        </div>

        <div class="form-group">
          <label for="subject">ご相談内容<span class="required">*</span></label>
          <select id="subject" name="subject" required>
            <option value="">選択してください</option>
            <option value="ゲーム開発のご相談">ゲーム開発のご相談</option>
            <option value="アプリ開発のご相談">アプリ開発のご相談</option>
            <option value="AI/バーチャルヒューマンのご相談">AI/バーチャルヒューマンのご相談</option>
            <option value="その他">その他</option>
          </select>
        </div>

        <div class="form-group">
          <label for="message">お問い合わせ内容<span class="required">*</span></label>
          <textarea id="message" name="message" required minlength="10" placeholder="具体的なご相談内容をご記入ください（10文字以上）"></textarea>
        </div>

        <button type="submit" class="submit-btn" id="submit-btn">送信する</button>
      </form>
    </main>

    <footer>
      <p>© <span id="y"></span> かわぐち (isa130pull)</p>
    </footer>
  </div>

  <script>
    // Google Apps Script URL（後で設定）
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyU2CsUCyU_Bjw_BLW-pehKTu6UTUYGFaMyJMJVGwdkSYGO64ngPj_lBUPK9StewzbzQA/exec';

    const form = document.getElementById('contact-form');
    const submitBtn = document.getElementById('submit-btn');
    const messageDiv = document.getElementById('message');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // バリデーション
      const formData = new FormData(form);
      const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        subject: formData.get('subject'),
        message: formData.get('message')
      };

      // 簡易的なバリデーション
      if (data.message.length < 10) {
        showMessage('お問い合わせ内容は10文字以上入力してください。', 'error');
        return;
      }

      // 送信中の状態
      submitBtn.disabled = true;
      submitBtn.textContent = '送信中...';
      messageDiv.className = 'message';
      messageDiv.style.display = 'none';

      try {
        const response = await fetch(SCRIPT_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'text/plain', // CORSプリフライトを避ける
          },
          body: JSON.stringify(data)
        });

        // レスポンスを解析
        const result = await response.json();

        if (result.success) {
          showMessage('お問い合わせを送信しました。ご連絡ありがとうございます！\n通常2営業日以内にご返信いたします。', 'success');
          form.reset();
        } else {
          showMessage('送信に失敗しました: ' + (result.error || '不明なエラー'), 'error');
        }

      } catch (error) {
        console.error('Error:', error);
        showMessage('送信に失敗しました。インターネット接続を確認の上、しばらく経ってから再度お試しください。', 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = '送信する';
      }
    });

    function showMessage(text, type) {
      // 改行を<br>に変換
      messageDiv.innerHTML = text.replace(/\n/g, '<br>');
      messageDiv.className = `message ${type} show`;
      messageDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
